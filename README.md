# 🎤 AI 智能网页 K 歌系统 (Web AI Karaoke)

这是一个基于 Web Audio API 和 Python 音频分析技术的在线 K 歌平台。与传统的 K 歌网页不同，本项目利用 AI 算法从 MP3 中提取真实的人声旋律线，实现了**毫秒级的实时音准侦测与打分**功能。


-----

## ✨ 核心亮点 (Features)

  * **🎵 AI 旋律提取**：使用 Python (`librosa`) 强大的音频处理能力，自动分析 MP3 歌曲，提取出精准的“标准音高”数据，不再依赖随机生成的假旋律。
  * **💯 实时音准打分**：在网页端利用“自相关算法”实时分析麦克风输入的频率，将用户歌声与原唱旋律进行比对，实现精准的 0-100 分打分系统。
  * **📊 可视化交互**：类似于《全民K歌》的视觉体验，绿色线条代表原唱旋律，红色光点代表你的声音，光点击中线条即得分。
  * **📱 全平台支持**：支持 PC 端和移动端（Android/iOS）。通过 GitHub Pages 部署，自动启用 HTTPS，完美解决手机麦克风权限问题。
  * **🎧 歌单系统**：支持本地/云端歌单切换，内置音量调节功能，提供沉浸式的演唱体验。

-----

## 🛠️ 技术栈 (Tech Stack)

  * **前端 (Frontend)**：
      * HTML5 / CSS3 (响应式设计，赛博朋克暗黑风格)
      * JavaScript (原生 ES6+)
      * **Web Audio API** (核心音频处理、分析器节点)
      * **Canvas API** (实时波形绘制与游戏逻辑渲染)
  * **后端/预处理 (Data Processing)**：
      * **Python 3**
      * **Librosa** (音频信号处理库，用于提取基频 f0)
      * **NumPy** (科学计算)

-----

## 📂 项目结构 (Structure)

```text
k歌/
├── k歌.html            # (或 index.html) 网页主入口，包含所有前端逻辑
├── playlist.json       # 自动生成的歌单列表文件
├── batch_analyze.py    # Python 预处理脚本：扫描 songs 目录并生成 JSON 数据
└── songs/              # 存放歌曲资源的文件夹
    ├── 稻香.mp3
    ├── 稻香.json       # 由脚本生成的音高数据
    ├── 十年.mp3
    └── 十年.json
```

-----

## 🚀 如何添加新歌 (How to Use)

本项目采用“预处理 + 静态展示”的架构，添加歌曲非常简单：

1.  **准备歌曲**：将您的 `.mp3` 文件放入 `songs/` 文件夹。
2.  **生成数据**：在本地运行 Python 脚本：
    ```bash
    python batch_analyze.py
    ```
    *脚本会自动扫描文件夹，提取每首歌的旋律数据，并更新 `playlist.json`。*
3.  **上传部署**：将更新后的 `songs` 文件夹、`playlist.json` 和 `index.html` 上传至 GitHub 仓库。
4.  **开始演唱**：刷新您的 GitHub Pages 链接，新歌就会出现在下拉列表中！

-----

## ⚠️ 注意事项

  * **麦克风权限**：在手机上通过浏览器访问时，必须使用 HTTPS 协议（GitHub Pages 默认支持），否则无法开启麦克风。
  * **佩戴耳机**：为了获得最佳体验并防止回声啸叫（Feedback），强烈建议在演唱时佩戴耳机。
  * **伴奏分离**：目前的 AI 提取是基于原曲分析的，如果在杂音非常大的重金属音乐中，提取精度可能会受影响。建议使用人声清晰的歌曲。

-----
